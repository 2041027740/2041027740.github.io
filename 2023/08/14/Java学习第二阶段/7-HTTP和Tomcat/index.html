<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="空灵">
<meta property="og:type" content="article">
<meta property="og:title" content="7_HTTP和Tomcat">
<meta property="og:url" content="http://example.com/2023/08/14/Java%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/7-HTTP%E5%92%8CTomcat/index.html">
<meta property="og:site_name" content="星辰可染呀">
<meta property="og:description" content="空灵">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:\git\java-53-course-materials\02-DSDB\02-%E7%AC%94%E8%AE%B0\img-http&tomcat\image-20230116095331886.png">
<meta property="og:image" content="d:\git\java-53-course-materials\02-DSDB\02-%E7%AC%94%E8%AE%B0\img-http&tomcat\image-20230116120235895.png">
<meta property="og:image" content="d:\git\java-53-course-materials\02-DSDB\02-%E7%AC%94%E8%AE%B0\img-http&tomcat\image-20230220173311923.png">
<meta property="og:image" content="d:\git\java-53-course-materials\02-DSDB\02-%E7%AC%94%E8%AE%B0\img-http&tomcat\image-20230220173210187.png">
<meta property="og:image" content="d:\git\java-53-course-materials\02-DSDB\02-%E7%AC%94%E8%AE%B0\img-http&tomcat\image-20230116143613352.png">
<meta property="og:image" content="d:\git\java-53-course-materials\02-DSDB\02-%E7%AC%94%E8%AE%B0\img-http&tomcat\image-20221024174329344.png">
<meta property="article:published_time" content="2023-08-14T00:31:25.000Z">
<meta property="article:modified_time" content="2023-08-14T00:57:30.689Z">
<meta property="article:author" content="染星辰">
<meta property="article:tag" content="HTTP和Tomcat">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:\git\java-53-course-materials\02-DSDB\02-%E7%AC%94%E8%AE%B0\img-http&tomcat\image-20230116095331886.png">


<link rel="canonical" href="http://example.com/2023/08/14/Java%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/7-HTTP%E5%92%8CTomcat/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2023/08/14/Java%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/7-HTTP%E5%92%8CTomcat/","path":"2023/08/14/Java学习第二阶段/7-HTTP和Tomcat/","title":"7_HTTP和Tomcat"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>7_HTTP和Tomcat | 星辰可染呀</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">星辰可染呀</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">恰似人间惊鸿客，墨染星辰云水间</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP"><span class="nav-text">HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%8F%E8%AE%AE"><span class="nav-text">协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP%E5%8D%8F%E8%AE%AE"><span class="nav-text">HTTP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B"><span class="nav-text">网络模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP%E5%8D%8F%E8%AE%AE%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-text">HTTP协议工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP%E8%AF%B7%E6%B1%82"><span class="nav-text">HTTP请求</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="nav-text">请求行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="nav-text">请求头</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A9%BA%E8%A1%8C"><span class="nav-text">空行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E4%BD%93%EF%BC%88%E5%AD%98%E5%82%A8%E6%8F%90%E4%BA%A4%E7%9A%84%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%EF%BC%89"><span class="nav-text">请求体（存储提交的请求数据）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP%E5%93%8D%E5%BA%94"><span class="nav-text">HTTP响应</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E8%A1%8C"><span class="nav-text">响应行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="nav-text">响应头</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A9%BA%E8%A1%8C-1"><span class="nav-text">空行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E4%BD%93-%E6%98%AF%E5%AD%98%E6%94%BE%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E7%9A%84%E5%9C%B0%E6%96%B9"><span class="nav-text">响应体(是存放返回数据的地方)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%AE%8C%E6%95%B4%E7%9A%84%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B-%E9%87%8D%E8%A6%81"><span class="nav-text">请求完整的处理流程(重要)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTPS"><span class="nav-text">HTTPS</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tomcat"><span class="nav-text">Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-text">概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%86%99%E7%AE%80%E6%98%93%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">手写简易服务器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaEE%E8%A7%84%E8%8C%83"><span class="nav-text">JavaEE规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat-1"><span class="nav-text">Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8"><span class="nav-text">启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2"><span class="nav-text">停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E8%B5%84%E6%BA%90"><span class="nav-text">部署资源</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E9%83%A8%E7%BD%B2"><span class="nav-text">直接部署</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%98%A0%E5%B0%84"><span class="nav-text">虚拟映射</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#conf-Catalina-localhost-%E6%8E%8C%E6%8F%A1"><span class="nav-text">conf&#x2F;Catalina&#x2F;localhost(掌握)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#conf-server-xml-%E4%BA%86%E8%A7%A3"><span class="nav-text">conf&#x2F;server.xml(了解)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-text">原理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tomcat%E8%AE%BE%E7%BD%AE"><span class="nav-text">Tomcat设置</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">染星辰</p>
  <div class="site-description" itemprop="description">一生温暖纯良，不舍爱与自由</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/08/14/Java%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/7-HTTP%E5%92%8CTomcat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="染星辰">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="星辰可染呀">
      <meta itemprop="description" content="一生温暖纯良，不舍爱与自由">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="7_HTTP和Tomcat | 星辰可染呀">
      <meta itemprop="description" content="空灵">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          7_HTTP和Tomcat
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-08-14 08:31:25 / 修改时间：08:57:30" itemprop="dateCreated datePublished" datetime="2023-08-14T08:31:25+08:00">2023-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%E8%AF%BE%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">java学习第二阶段课件</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description">空灵</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><p>学习目标：</p>
<ul>
<li>掌握HTTP报文格式，请求报文格式，响应报文格式</li>
<li>掌握状态码</li>
<li>了解Tomcat是什么</li>
<li>Tomcat的安装及使用</li>
<li>掌握直接部署&amp;虚拟部署</li>
</ul>
<p><strong>整体流程图</strong></p>
<p><img src="D:\git\java-53-course-materials\02-DSDB\02-笔记\img-http&tomcat\image-20230116095331886.png" alt="image-20230116095331886"></p>
<ul>
<li>前端：负责获取数据，展示数据</li>
<li>程序：负责监听端口，并对请求作出响应，这中间需要从数据库获取数据</li>
<li>数据库：数据仓库。通过标准化语言SQL进行操作，在Java代码中，是通过JDBC进行操作。</li>
</ul>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>三方协议、租房协议、购房协议</p>
<p>用来规定双方的权利以及义务</p>
<p>网络传输中提及的协议：通讯双方传递信息时，传递的信息应当具有的格式。只有共同遵循一致的格式，那么双方才可以正常进行通讯。</p>
<p>比如班主任拿到信息表，南风老师给大家分宿舍。</p>
<p>约定好了格式。 姓名   年龄   籍贯   性别。 班主任把这份数据发给了南风老师，假设南风老师也写Java代码。</p>
<p>1.拆分，按照换行拆   split(“\r\n”)</p>
<p>2.遍历每一行。再拆   split(“ “);   拿index&#x3D;0  拿index&#x3D;3.</p>
<p>3.分宿舍。</p>
<p>比如大家来之前，我们要根据学生的性别，给学生分宿舍。</p>
<p>A   手上有学生的数据。B负责分宿舍。</p>
<p>A和B老师规定格式 ： 有四列   分别是  姓名 年龄 籍贯 性别。</p>
<p>A老师把数据发给B老师， 首先拆，拆完再拆。</p>
<p><em>姓名 年龄 籍贯 性别</em></p>
<p>甲方：</p>
<p>长风 25 河南 男</p>
<p>景天 28 河南 女</p>
<p>天明 29 河南 男</p>
<p>……</p>
<p>经过网络传输学生的信息</p>
<p>乙方：需求：接收到学生的信息，根据学生的性别去安排宿舍</p>
<p>1.根据换行符来分割出每一个学生的信息</p>
<p>2.每个学生信息又按照空格来进行分割，其中最后一部分为性别</p>
<p>上述过程中，甲乙双方可以正常进行通讯的前提是双方都遵循同样的规则。这个就是协议。</p>
<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><p>HTTP:Hyper Text Transfer Protocol。超文本传输协议。</p>
<p>超文本：超越了普通的文本，资源类型是丰富的，比如文本、音视频、图片等资源。</p>
<p>传输：通讯的双方。客户端、服务器</p>
<p>协议：通讯双方应该在传递时遵循的规则</p>
<p>HTML: Hyper Text Markup Language</p>
<h3 id="网络模型"><a href="#网络模型" class="headerlink" title="网络模型"></a>网络模型</h3><p>只是逻辑上面的概念，分层。并不是物理上面的层次。分层的目的主要是为了解耦、提升代码的可复用性、系统的可维护性。</p>
<p>七层  四层  五层。</p>
<h3 id="HTTP协议工作流程"><a href="#HTTP协议工作流程" class="headerlink" title="HTTP协议工作流程"></a>HTTP协议工作流程</h3><p>1.域名解析</p>
<p>域名：jd.com  cskaoyan.com  taobao.com.可以用来指代网络中的一台计算机主机，对应ip地址。</p>
<p>jd.com———-解析   xxx.xxx.xxx.xxx</p>
<ul>
<li>浏览器缓存</li>
<li>操作系统缓存</li>
<li>hosts文件（127.0.0.1  localhost指的是本机）</li>
<li>DNS服务器解析</li>
</ul>
<p>C:\Windows\System32\drivers\etc</p>
<p>2.建立TCP连接</p>
<p>3.浏览器发送HTTP请求</p>
<p>4.HTTP请求经过中转到达服务器之后，被服务器接收到，服务器解析HTTP请求，并且做出HTTP响应。</p>
<p>5.HTTP响应经过中转再次返回给客户端，客户端接收到HTTP响应，并且加以解析、渲染</p>
<p>6.如果解析的过程中，发现需要去加载其他的css、js、img等资源，那么会自行再次发送请求，整个过程同上</p>
<p>7.最终浏览器渲染出来页面，呈现页面给用户。</p>
<h3 id="HTTP请求"><a href="#HTTP请求" class="headerlink" title="HTTP请求"></a>HTTP请求</h3><p>发送的HTTP请求一般称之为HTTP请求报文，分为<span style=color:red;background:yellow><strong>请求行、请求头、空行、请求体</strong></span>四部分.其中的一些消息头和正文都是可选的，消息头和正文内容之间要用空行(CRLF即\r\n)隔开.</p>
<p>客户端发送的HTTP请求信息，一般情况下也称作HTTP请求报文。</p>
<p><img src="D:\git\java-53-course-materials\02-DSDB\02-笔记\img-http&tomcat\image-20230116120235895.png" alt="image-20230116120235895"></p>
<h4 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a>请求行</h4><p>又可以进一步分为三个部分。</p>
<p><code>GET /forum-280-1.html HTTP/1.1</code></p>
<ul>
<li>请求方法（GET  POST ）</li>
<li>请求资源（服务器内部路径）</li>
<li>协议版本（HTTP协议的版本）</li>
</ul>
<p><span style=color:red;background:yellow><strong>GET 请求  POST请求。区别。</strong></span></p>
<p>1.语义不同。get请求是获取数据，post请求一般是提交数据</p>
<p>2.参数放的位置不同。get请求的参数放在url上面，使用？进行拼接， post请求请求的参数放在请求体里。 url长度有限制，所以使用get请求发送的数据长度有限制。</p>
<p>3.post请求安全一点。 因为它提交数据的时候，不能直接看到。</p>
<ul>
<li><p><font color=red><strong>请求方法</strong></font>：使用何种方法向当前的请求资源地址发起请求。常见的请求方法 GET  POST</p>
<p><strong>GET和POST区别？</strong></p>
<p>本质的区别在于语义的不同。</p>
<ul>
<li><p><strong>GET的语义是用来进行查询、获取数据。99%的情况下通过浏览器访问网站都是get请求。比如查询商品信息。</strong></p>
</li>
<li><p><strong>POST的语义是用来进行提交数据。注册、登录、文件上传（微信更换头像）等</strong></p>
</li>
</ul>
<p><strong>如何发送GET或者POST请求？</strong></p>
<ul>
<li>get请求： 使用浏览器，在地址栏直接输入url，直接发送的就是get请求；使用form表单</li>
<li>post请求：使用form表单</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">以post请求方法访问cskaoyan.com,不可以直接在浏览器地址栏直接输入网址</span><br><span class="line">如果希望使用post方法访问cskaoyan.com，需要：</span><br><span class="line">1.先访问1.html（当前页面），将form表单加载出来</span><br><span class="line">2.点击form表单的提交按钮</span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://www.cskaoyan.com&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><span style=color:red;background:yellow><strong>验证：</strong></span>fiddler软件</p>
<p>安装完毕之后，打开软件。只需要操作浏览器即可，浏览器发送请求时，fiddler软件便会记录下来</p>
<p>注意，如果是以下情况，fiddler软件无法抓包：</p>
<ul>
<li>浏览器设置了代理。（chatGPT ,大家晚上如果抓不上包，看看扩展程序）</li>
<li>https。</li>
</ul>
<p><span style=color:red;background:yellow><strong>学会怎样发get请求和post请求。</strong></span></p>
</li>
<li><p><font color=red><strong>请求资源</strong></font>:指的是访问服务器上面的哪个资源(访问不同页面时，区别主要在于请求资源的不同)</p>
<p><a target="_blank" rel="noopener" href="http://www.cskaoyan.com/forum-280-1.html">http://www.cskaoyan.com/forum-280-1.html</a></p>
<p><a target="_blank" rel="noopener" href="http://www.cskaoyan.com/forum-279-1.html">http://www.cskaoyan.com/forum-279-1.html</a></p>
<p>上述两个不同的请求，在HTTP请求报文层面的区别是啥？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET http://www.cskaoyan.com/forum-280-1.html HTTP/1.1</span><br><span class="line"></span><br><span class="line">GET http://www.cskaoyan.com/thread-664595-1-1.html HTTP/1.1</span><br><span class="line"></span><br><span class="line">GET /thread-664595-1-1.html HTTP/1.1</span><br><span class="line"></span><br><span class="line">请求资源 或者 服务器内部路径不同。就相当于告诉服务器，我需要请求不同的资源</span><br><span class="line"> </span><br><span class="line">/login   </span><br><span class="line">/search </span><br><span class="line"></span><br><span class="line">Fiddler抓包，请求资源有点问题。它自己把url拼接上去了。 真实请求是没有这个url的。</span><br></pre></td></tr></table></figure>



<p>服务器内部路径</p>
</li>
<li><p><font color=red><strong>版本协议</strong></font></p>
<p>HTTP&#x2F;1.1：当前使用的是HTTP 1.1的版本</p>
<p>在1.1之前的上一个版本是1.0.他们两者之间的区别主要在于是否支持长连接。</p>
<p>长连接：在一个TCP连接内，是否允许发送多个HTTP请求。如果支持就是长连接。</p>
<p>1.0版本不支持长连接</p>
<p>1.1默认支持长连接</p>
</li>
</ul>
<h4 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h4><p>请求头可以理解为是对于请求信息的额外补充，类似于合同的附加合同、补充条款。</p>
<p>作为一个了解。不要背，如果忘了，看下文档，或者查一下。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Accept:浏览器可接受的    MIME类型 */*   (大类型)/(小类型)。浏览器可以接收的类型，言外之意是服务器做出响应时，应当优先响应我可以接收处理的类型。</span><br><span class="line">	MIME:使用一种大类型/小类型的方式将互联网上面的资源加以分类。比如text/html、text/txt、audio/mp3、video/mkv、image/jpeg、image/png</span><br><span class="line"> Accept作为一个补充条款，浏览器告诉服务器，我优先能处理的类型。 服务器在响应的时候，会优先响应这几种指定的类型。</span><br><span class="line">	</span><br><span class="line">Accept-Charset: 浏览器通过这个头告诉服务器，它支持哪种字符集</span><br><span class="line">Accept-Encoding:浏览器能够进行解码的数据编码方式，比如gzip。浏览器利用该头告诉服务器，如果返回的资源需要进行压缩，那么应该使用浏览器可以支持的压缩算法。</span><br><span class="line"></span><br><span class="line">	rar zip   </span><br><span class="line"></span><br><span class="line">Accept-Language: 浏览器所希望的语言种类，当服务器能够提供一种以上的语言版本时要用到,</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8</span><br><span class="line">中文简体 q=权重。 越大代表优先级越高，没写q，代表1。有</span><br><span class="line"></span><br><span class="line">浏览器告诉服务器，我这边希望的语言种类有三种。 q代表权重。 </span><br><span class="line"></span><br><span class="line">如果有中文简体，就发中文简体； 没有的话，就发中文繁体；</span><br><span class="line">再没有的话，就发英文。</span><br><span class="line"></span><br><span class="line">国际化： 一个网站，访问有中国人，有外国人。 如果你是中国人，返回中文； 如果你是美国人，返回英文。</span><br><span class="line"></span><br><span class="line">可以在浏览器中进行设置。twitter.com</span><br><span class="line">Host:初始URL中的主机和端口 </span><br><span class="line">Referer:包含一个URL，用户从该URL代表的页面出发访问当前请求的页面 （防盗链）</span><br><span class="line">Content-Type:内容类型。发送的时候的内容类型。比如我现在要上传一张图片。</span><br><span class="line">If-Modified-Since: Wed, 02 Feb 2011 12:04:56 GMT 服务器利用这个头与服务器的文件进行比对，如果一致，则告诉浏览器从缓存中直接读取文件。</span><br><span class="line">User-Agent:浏览器类型.是从什么浏览器发起的请求</span><br><span class="line">Content-Length:表示请求消息正文的长度。表示的是体的长度。</span><br><span class="line">Connection:表示是否需要持久连接。如果服务器看到这里的值为“Keep-Alive”，或者看到请求使用的是HTTP 1.1（HTTP 1.1默认进行持久连接 </span><br><span class="line">Cookie:这是最重要的请求头信息之一 </span><br><span class="line"></span><br><span class="line">Date: Mon, 22 Aug 2011 01:55:39 GMT请求时间GMT </span><br></pre></td></tr></table></figure>

<p><strong>1.直接访问A页面</strong></p>
<p><img src="D:\git\java-53-course-materials\02-DSDB\02-笔记\img-http&tomcat\image-20230220173311923.png" alt="image-20230220173311923"></p>
<p><strong>2.先访问B页面，通过B页面跳转到A页面</strong></p>
<p><img src="D:\git\java-53-course-materials\02-DSDB\02-笔记\img-http&tomcat\image-20230220173210187.png" alt="image-20230220173210187"></p>
<p>带货分钱。 referer</p>
<p>有没有技术手段可以区分这两种方式？利用<strong>referer请求头</strong>。</p>
<p>使用场景？带货引流。用来确定是从哪个人的直播间跳进来的，最后分钱。</p>
<p>图片防盗链。</p>
<p>谷歌广告联盟。站长之家。</p>
<p>防盗链</p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/img_convert/0e449547f8e5354646f76af0d1b4800a.png">https://img-blog.csdnimg.cn/img_convert/0e449547f8e5354646f76af0d1b4800a.png</a></p>
<p>我现在要做一个图片网站，我自己不存储图片，我去各大图片网站，复制Url。</p>
<p>别人存储图片的网站，就不乐意了。</p>
<p>通过refer来判断，是从什么网站进入的。</p>
<p>直播带货。我是一个主播，我贴了一个商品在这。店铺怎么确定，哪些人是通过这个主播进入的店铺。</p>
<p>通过refer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请求头，响应头。不要背。大致知道意思（英语单词。）</span><br><span class="line">如果有一些你想懂得更深一点，上网google一下。chatgpt一下。 </span><br></pre></td></tr></table></figure>





<h4 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h4><h4 id="请求体（存储提交的请求数据）"><a href="#请求体（存储提交的请求数据）" class="headerlink" title="请求体（存储提交的请求数据）"></a>请求体（存储提交的请求数据）</h4><p>可以用来大量放置数据的地方。客户端希望提交大量的数据到服务器，那么就把数据放置在请求体里面。微信更换头像。</p>
<p>上传一个文件，上传word txt。</p>
<h3 id="HTTP响应"><a href="#HTTP响应" class="headerlink" title="HTTP响应"></a>HTTP响应</h3><p>服务器发送的HTTP响应信息，一般情况下也称作HTTP响应报文。</p>
<p>服务器发送的HTTP响应一般称之为HTTP请求报文，分为<span style=color:red;background:yellow><strong>响应行、响应头、空行、响应体</strong></span>四部分.其中的一些消息头（响应）和正文都是可选的，消息头和正文内容之间要用空行(CRLF即\r\n)隔开.</p>
<p><img src="D:\git\java-53-course-materials\02-DSDB\02-笔记\img-http&tomcat\image-20230116143613352.png" alt="image-20230116143613352"></p>
<h4 id="响应行"><a href="#响应行" class="headerlink" title="响应行"></a>响应行</h4><p>响应行主要是三部分组成</p>
<ul>
<li><p>版本协议（HTTP&#x2F;1.1 HTTP1.0）</p>
</li>
<li><p>状态码</p>
</li>
<li><p>原因短语</p>
</li>
<li><p>版本协议</p>
</li>
<li><p><span style=color:yellow;background:red><strong>状态码</strong></span></p>
<p>200：OK  一切访问过程是正常的</p>
<p>301、302、307：重定向。当前的地址不可用，服务器需要将请求重新定向到一个新的地址。<strong>重定向一定会搭配着Location响应头</strong>一起来发挥作用。</p>
<p><a target="_blank" rel="noopener" href="http://www.bing.com/">http://www.bing.com</a> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//www.bing.com/      307      Location: https://www.bing.com/</span></span><br><span class="line">https:<span class="comment">//www.bing.com/     200</span></span><br></pre></td></tr></table></figure>



<p>304:未修改。使用缓存。</p>
<p>404：没有找到。Not Found。 </p>
<p>500：服务器异常。有bug。如果出现500状态码，那么一定有bug，但是200状态码不一定没有bug。</p>
</li>
</ul>
<p>WebSocket。</p>
<p>bug: 运行异常叫bug？ 和产品经理的预期不一样，就叫bug。</p>
<ul>
<li><p>我传入一个班级id，你需要根据班级id，找出这个班上最高的分数的同学。 </p>
</li>
<li><p>找出这个班上最低的分数的同学。 </p>
</li>
<li><p>原因短语 OK</p>
</li>
</ul>
<h4 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Location: http://www.cskaoyan.com/指示新的资源的位置.需要搭配着重定向状态码一起来使用。</span><br><span class="line"></span><br><span class="line">// 301 302 307  一定要返回一个location。告诉我新的地址。</span><br><span class="line"></span><br><span class="line">Server: apache tomcat 指示服务器的类型</span><br><span class="line">Content-Encoding: gzip ； 服务器发送的数据采用的编码格式。</span><br><span class="line"></span><br><span class="line">Content-Length: 80 告诉浏览器正文的长度</span><br><span class="line">Content-Language: zh-cn; 服务发送的文本的语言</span><br><span class="line">Content-Type: text/html;  服务器发送的内容的MIME类型,</span><br><span class="line"></span><br><span class="line">// 写这个Content-Type有什么作用。  图片按照什么发的？音频怎么发</span><br><span class="line">// 必须要把这个图片进行  编码  转成二进制。 写到响应体里面</span><br><span class="line">// 浏览器这边。 对数据进行解析。尤其是响应体里面的图片。 </span><br><span class="line">// 如果不写Content-Type， 可能会导致乱码。</span><br><span class="line">// 如果写错了，会发生什么。 乱码。     乱码的本质： 编解码不一致。</span><br><span class="line"></span><br><span class="line">Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT; 文件的最后修改时间</span><br><span class="line">Refresh: 1;url=http://www.cskaoyan.com; 指示客户端刷新频率。单位是秒</span><br><span class="line">相当于告诉浏览器，这边 1s后对页面进行刷新。 刷新的网址是 url=http://www.cskaoyan.com;</span><br><span class="line"></span><br><span class="line">Content-Disposition: attachment; filename=aaa.zip; 指示客户端保存文件,直接下载文件</span><br><span class="line">Set-Cookie: SS=Q0=5Lb_nQ; path=/search; 服务器端发送的Cookie</span><br><span class="line">Expires: 0</span><br><span class="line">Cache-Control: no-cache (1.1)  </span><br><span class="line">Connection: close/Keep-Alive   </span><br><span class="line">Date: Tue, 11 Jul 2000 18:23:51 GMT</span><br><span class="line"></span><br><span class="line">// 有一些情况是不希望进行缓存。 </span><br><span class="line">// 就可以通过这两个响应头进行控制。 </span><br></pre></td></tr></table></figure>

<h4 id="空行-1"><a href="#空行-1" class="headerlink" title="空行"></a>空行</h4><h4 id="响应体-是存放返回数据的地方"><a href="#响应体-是存放返回数据的地方" class="headerlink" title="响应体(是存放返回数据的地方)"></a>响应体(是存放返回数据的地方)</h4><p>用来存放服务器返回给客户端大量的数据。响应体里面的数据会最终出现在浏览器的窗口界面中。</p>
<p>可以响应文本类型，也可以响应二进制类型；如果响应二进制类型，那么需要返回特定的Content-Type</p>
<p>比如，现在写回了一张图片。但是content-type写的是text&#x2F;html</p>
<p>对于浏览器来说。有没有啥问题？会乱码。</p>
<p>浏览器得到的信息： 我现在拿到了一个网页。所以拿响应体，会按照网页来进行解析。就会乱码</p>
<p>乱码的本质： 编解码不一致。</p>
<p>比如返回html，浏览器会把这个东西显示在页面上。</p>
<p>返回图片，会显示到页面上。</p>
<p>html和图片 都是放在 响应体里面的。</p>
<h3 id="请求完整的处理流程-重要"><a href="#请求完整的处理流程-重要" class="headerlink" title="请求完整的处理流程(重要)"></a>请求完整的处理流程(重要)</h3><p>以访问<a target="_blank" rel="noopener" href="http://www.cskaoyan.com为例/">http://www.cskaoyan.com为例</a></p>
<p>1.域名解析。首先尝试使用浏览器缓存查找，再次通过操作系统缓存查找，借助于hosts文件，最终利用DNS服务器来进行解析。</p>
<p>​						cskaoyan.com——58.211.2.79（中国 江苏省 苏州市）</p>
<p>2.建立TCP连接。</p>
<p>3.浏览器会代理用户发送HTTP请求报文(GET &#x2F;1.html HTTP&#x2F;1.1………..)，请求报文在网络中中转传输到达服务器之后，会服务器接收到，进行解析</p>
<p>4.服务器产生HTTP响应报文（HTTP&#x2F;1.1 200 OK………..）,响应报文在网络中中转传输返回给客户端之后，客户端会将响应报文进行解析、渲染</p>
<p>5.如果发现需要再次加载新的资源文件，那么浏览器会自行再次发起请求，过程同上</p>
<p>6.加载获取到所有的资源文件之后，最终渲染（显示），将页面呈现在用户面前。</p>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>目前主流的网站使用的都是https协议了。</p>
<p>HTTPS &#x3D; HTTP + Secure&#x2F;SSL</p>
<p>相当于，只是给HTTP加了一些保护壳。如果在企业开发过程中，我们不用去管它。因为有运维。</p>
<p>运维来操作。 操作Linux。运维帮忙安装软件。熟练操作Linux。256G。</p>
<p>8台电脑。 </p>
<p>后端。 toB。私有化部署。 环境非常复杂。 </p>
<p>后端要值班。处理问题。 先找运维。 喊后端过去。 </p>
<ul>
<li>看日志。</li>
</ul>
<p>http协议目前存在的问题？</p>
<p>1.传输过程全程明文传输</p>
<p>2.不验证通讯另一方的身份</p>
<p>3.没有完整性校验，可能报文在中途已经被篡改，但是无从得知</p>
<p>https分别针对上述三点做了改进：</p>
<p>1.加密</p>
<p>加密算法：对称加密（加密解密使用的是同一把秘钥；效率高，但是安全性不高）、非对称加密（公钥加密，私钥解；公钥加密，公钥无法解;安全程度非常高，但是效率低）</p>
<p>混合加密</p>
<p>对称加密： 加密算法： 对每一个字母，+1</p>
<p>hello,java    –&gt;     ifmmp.kbwb  —&gt;   hello,java。</p>
<p>公钥 私钥。      公钥加密，私钥解密。 私钥加密，公钥解密。 </p>
<p>2.证书：证书颁发者（一般是一个权威机构）颁发给当前网站的一个凭证。</p>
<p>3.完整性校验：哈希。</p>
<p>直接在网络的出口配，是运维同学配，我们不用管。</p>
<h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>服务器：两层含义。<strong>软件层面：软件，可以将本地的资源发布到网络中，供网络上面的其他用户来访问，比如tomcat</strong>；硬件层面：一台性能比较高的计算机主机，云服务器。</p>
<p>服务器开发：指的是在服务器软件程序中进一步去编写程序来运行。</p>
<p>静态资源：页面一成不变的。</p>
<p>动态资源：富有交互性、变化性。目前访问的网站页面基本都是动态资源。本质就是程序。比如登录之后会显示各自的用户名。开发动态资源的技术有很多种，其中java语言中 Servlet。</p>
<h2 id="手写简易服务器"><a href="#手写简易服务器" class="headerlink" title="手写简易服务器"></a>手写简易服务器</h2><p>服务器程序：持续不断地监听某一端口号；如果客户端往当前端口号发送请求，那么服务器需要做出响应。</p>
<p>要求：涉及协议的部分需要掌握，其他部分根据自己的情况来。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cskaoyan.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> MainServer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 对于服务器来说，需要做的事情就是根据客户端发送过来的请求报文，然后取出请求资源部分</span></span><br><span class="line"><span class="comment"> * 然后做出对应的响应（如果文件存在，则将文件的数据响应出去；如果文件不存在，则返回404状态码）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> 远志 zhangsong@cskaoyan.onaliyun.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/10/24 15:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> V1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainServer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//服务器程序，需要监听某一端口号 8080</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">            <span class="comment">//client就是连接进来的一个客户端</span></span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">client</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">                <span class="comment">//获取客户端提交过来的信息</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                        <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Request</span>(client);</span><br><span class="line">                        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line"><span class="comment">//            String method = request.getMethod();</span></span><br><span class="line"><span class="comment">//            String host = request.getHeader(&quot;Host&quot;);</span></span><br><span class="line"><span class="comment">//            Set&lt;String&gt; headerNames = request.getHeaderNames();</span></span><br><span class="line"><span class="comment">//            for (String headerName : headerNames) &#123;</span></span><br><span class="line"><span class="comment">//                String value = request.getHeader(headerName);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line">                        <span class="comment">//已经获取到了请求资源，有针对性的做出响应</span></span><br><span class="line">                        <span class="comment">//   /1.html  /2.html</span></span><br><span class="line">                        <span class="comment">//subString1目的是为了把前面的/去掉</span></span><br><span class="line">                        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            outputStream = client.getOutputStream();</span><br><span class="line">                            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(requestURI.substring(<span class="number">1</span>));</span><br><span class="line">                            <span class="type">StringBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">                            <span class="keyword">if</span>(file.exists() &amp;&amp; file.isFile())&#123;</span><br><span class="line">                                <span class="comment">//200</span></span><br><span class="line">                                <span class="comment">//响应HTTP响应报文</span></span><br><span class="line">                                buffer.append(<span class="string">&quot;HTTP/1.1 200 OK\r\n&quot;</span>);</span><br><span class="line">                                buffer.append(<span class="string">&quot;Content-Type:text/html\r\n&quot;</span>);</span><br><span class="line">                                buffer.append(<span class="string">&quot;Server:changfengdeeBMW\r\n&quot;</span>);</span><br><span class="line">                                buffer.append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                                outputStream.write(buffer.toString().getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">                                <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                                <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                                <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                                <span class="keyword">while</span> ((length = fileInputStream.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                                    outputStream.write(bytes, <span class="number">0</span>, length);</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">return</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">//404</span></span><br><span class="line">                            <span class="comment">//如果希望给客户端返回信息</span></span><br><span class="line">                            buffer.append(<span class="string">&quot;HTTP/1.1 404 Not Found\r\n&quot;</span>);</span><br><span class="line">                            buffer.append(<span class="string">&quot;Content-Type:text/html\r\n&quot;</span>);</span><br><span class="line">                            buffer.append(<span class="string">&quot;Server:changfengdeeBMW\r\n&quot;</span>);</span><br><span class="line">                            buffer.append(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                            buffer.append(<span class="string">&quot;&lt;div style=&#x27;color:red;align:center&#x27;&gt;File Not Found&lt;/div&gt;&quot;</span>);</span><br><span class="line">                            outputStream.write(buffer.toString().getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span>(outputStream != <span class="literal">null</span>)&#123;</span><br><span class="line">                                <span class="keyword">try</span> &#123;</span><br><span class="line">                                    outputStream.close();</span><br><span class="line">                                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                                    e.printStackTrace();</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).start();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cskaoyan.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Reqeust</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> 远志 zhangsong@cskaoyan.onaliyun.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/10/24 16:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> V1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Request</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String requestMessage;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String method;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String requestURI;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String protocol;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> method;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRequestURI</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> requestURI;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProtocol</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> protocol;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; requestHeaders = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getHeader</span><span class="params">(String headerName)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> requestHeaders.get(headerName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">getHeaderNames</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> requestHeaders.keySet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Request</span><span class="params">(Socket client)</span> &#123;</span><br><span class="line">        parseRequest(client);</span><br><span class="line">        parseRequestLine();</span><br><span class="line">        parseRequestHeader();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析请求报文的请求头部分</span></span><br><span class="line"><span class="comment">     * 如何解析？请求头开始的标志：\r\n   请求头结束的标志：\r\n\r\n</span></span><br><span class="line"><span class="comment">     * 解析之后的请求头存放在哪？map</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">parseRequestHeader</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">begin</span> <span class="operator">=</span> requestMessage.indexOf(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> requestMessage.indexOf(<span class="string">&quot;\r\n\r\n&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> requestMessage.substring(begin + <span class="number">2</span>, end);</span><br><span class="line">        String[] split = header.split(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : split) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> s.indexOf(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> s.substring(<span class="number">0</span>, index).trim();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> s.substring(index + <span class="number">1</span>).trim();</span><br><span class="line">            requestHeaders.put(key, value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析请求报文的请求行部分  GET /2.html HTTP/1.1\r\n</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">parseRequestLine</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> requestMessage.indexOf(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        <span class="comment">// GET /2.html HTTP/1.1</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> requestMessage.substring(<span class="number">0</span>, index);</span><br><span class="line">        String[] parts = line.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.method = parts[<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">this</span>.requestURI = parts[<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">this</span>.protocol = parts[<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">parseRequest</span><span class="params">(Socket client)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            inputStream = client.getInputStream();</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="comment">//note：下面read这一步不要再循环里面读取</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> inputStream.read(bytes);</span><br><span class="line">            <span class="built_in">this</span>.requestMessage = <span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, length);</span><br><span class="line">            System.out.println(requestMessage);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>能写就写。不能写算了。一定要理解这个过程。</p>
<h2 id="JavaEE规范"><a href="#JavaEE规范" class="headerlink" title="JavaEE规范"></a>JavaEE规范</h2><p><span style=color:red;background:yellow><strong>JavaEE规范：</strong></span>制定了一系列的接口。相应的厂商需要实现该接口，对于开发者来说，<font color=red><strong>只需要面向接口编程即可。</strong></font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Request</span>&#123;</span><br><span class="line"> 	String <span class="title function_">getHeader</span><span class="params">(String name)</span>;</span><br><span class="line">    </span><br><span class="line">    String <span class="title function_">getMethod</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getResourceName</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">&#125; </span><br><span class="line">    </span><br><span class="line"><span class="comment">// 接口有什么好处。 定义规范。 比如tomcat实现了这个规范， 最后再需要使用 header的时候</span></span><br><span class="line"><span class="comment">// 只需要面向接口编程     Request request = *********</span></span><br><span class="line"><span class="comment">// request.getHeader(&quot;refer&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果没有这样一套规范，tomcat这样定义</span></span><br><span class="line"><span class="comment">// String header(String name);</span></span><br><span class="line"><span class="comment">// String method();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务器厂商B</span></span><br><span class="line"><span class="comment">// String fetchHeader(String name);</span></span><br><span class="line"><span class="comment">// String fetchMethod();</span></span><br><span class="line"></span><br><span class="line">CutRequest   来解析 方法，资源，请求头</span><br><span class="line">    </span><br><span class="line">    简易的服务器。</span><br><span class="line">    getMethod()   getResourceName()  getProtocol()  </span><br><span class="line">    </span><br><span class="line">Request2   </span><br><span class="line"><span class="comment">// String fetchHeader(String name);</span></span><br><span class="line"><span class="comment">// String fetchMethod();</span></span><br><span class="line"><span class="comment">// String fetchResourceName();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>以服务器部分来做一个举例说明：</p>
<ul>
<li>比如说某个初创公司，使用了服务器A产品，需求：获取到referer请求头的值，进行统计<ul>
<li>A服务器提供了一个封装。叫做RequestA.getHeader(“referer”)</li>
</ul>
</li>
<li>之后，初创公司更换了另外一个服务器产品B<ul>
<li>B服务器提供一个获取请求头的方法是RequestB.getRequestHeader(“referer”)</li>
</ul>
</li>
<li>如果对于这个初创公司，从服务器产品A切换到B，<span style=color:red;background:yellow><strong>需要做哪些事情？</strong></span>涉及到request相关的部分全部需要推到重写。</li>
</ul>
<p><font color=red><strong>问题：</strong></font></p>
<ul>
<li>切换服务器麻烦</li>
<li>如果获取请求参数的方法参数根本不一样，很难兼容</li>
</ul>
<p>JavaEE规范，针对服务器这部分，做了一个规定：</p>
<p>请求报文 的封装对象统一使用HttpServletRequest接口来充当，里面制定了非常详细的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String <span class="title function_">getHeader</span><span class="params">(String name)</span>; </span><br><span class="line"></span><br><span class="line">String <span class="title function_">getMethod</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>各个服务器 厂商实现该接口即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RequestA impl HttpServletRequest</span><br><span class="line"></span><br><span class="line">RequestB impl HttpServletRequest</span><br></pre></td></tr></table></figure>

<p>初创公司的开发人员来说，我们编写的代码只需要这么去写HttpServletRequest.getHeader(key)</p>
<p>统一了操作，今后如果想从服务器A切换到服务器B，很容易就切换过去了。</p>
<h2 id="Tomcat-1"><a href="#Tomcat-1" class="headerlink" title="Tomcat"></a>Tomcat</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><blockquote>
<p> 直接解压缩到盘符根目录即可（推荐）</p>
</blockquote>
<p><span style=color:red;background:yellow><strong>注意：无论使用哪个软件，尽量不要代码放置在含有空格、中文、目录价结构非常深的目录中（idea、tomcat、vue等）</strong></span></p>
<p><strong>目录结构介绍</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bin：存放命令的目录。启停tomcat的命令。</span><br><span class="line"></span><br><span class="line">conf：配置文件文件夹，对tomcat进行配置。</span><br><span class="line"></span><br><span class="line">logs：日志目录，排查故障所用。</span><br><span class="line"></span><br><span class="line">webapps：部署资源</span><br></pre></td></tr></table></figure>

<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>1.双击startup.bat文件</p>
<p>2.bin目录下唤出cmd，执行startup</p>
<p>常见的启动故障：</p>
<p><font color=red><strong>没有正确配置好JAVA_HOME,导致tomcat启动窗口一闪而过。</strong></font></p>
<h3 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h3><p>1.双击shutdown.bat文件</p>
<p>2.bin目录下唤出cmd，执行shutdown</p>
<p>3.可以在tomcat启动成功的窗口中按住ctrl键，多次按c键，也可以结束。</p>
<h3 id="部署资源"><a href="#部署资源" class="headerlink" title="部署资源"></a>部署资源</h3><h4 id="直接部署"><a href="#直接部署" class="headerlink" title="直接部署"></a>直接部署</h4><p>直接将资源文件放置在webapps目录下。</p>
<p><span style=color:red;background:yellow><strong>步骤：</strong></span></p>
<p><strong>1.需要在webapps目录下新建一个目录,也建议大家使用英文</strong></p>
<p><strong>2.需要将资源文件放置在该目录下</strong></p>
<p><img src="D:\git\java-53-course-materials\02-DSDB\02-笔记\img-http&tomcat\image-20221024174329344.png" alt="image-20221024174329344"></p>
<p>如果希望访问该文件，应该如何访问？</p>
<p><code>http://localhost:8080/&#123;文件夹的名称&#125;/相对路径</code></p>
<p><code>http://localhost:8080/test52th/</code></p>
<p><code>http://localhost:8080/&#123;目录名称&#125;</code>  –》 相当于找到了 webapps目录下的  {目录名称}</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/app1">http://localhost:8080/app1</a>   –&gt;  相当于找到webapps&#x2F;app1的目录</p>
<p><span style=color:red;background:yellow><strong>注意：</strong></span></p>
<p>不能将文件直接放置在webapps目录下。需要放在webapps目录下的文件夹内。</p>
<p>我们不想直接将文件拷贝到 webapps目录下，我们有啥办法完成部署？</p>
<h4 id="虚拟映射"><a href="#虚拟映射" class="headerlink" title="虚拟映射"></a>虚拟映射</h4><p>正常情况下来说，需要部署资源，是要在webapps目录下操作的。但是如果希望不再webapps目录下，可不可以部署呢？可以。</p>
<p>不在webapps目录这种方式叫做<font color=red><strong>虚拟映射</strong></font>。虚拟地映射到tomcat的webapps目录下。</p>
<h5 id="conf-Catalina-localhost-掌握"><a href="#conf-Catalina-localhost-掌握" class="headerlink" title="conf&#x2F;Catalina&#x2F;localhost(掌握)"></a>conf&#x2F;Catalina&#x2F;localhost(掌握)</h5><p>新建一个xml文件，xml文件的名称（user1.xml）里面配置Context节点信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">docBase</span>=<span class="string">&quot;D:\app1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>比如，我们现在新建了一个xml文件，名字叫做user1.xml</p>
<p><code>http://localhost:8080/&#123;xml的名称&#125;</code> —》 其实相当于找到  {docBase}路径</p>
<p>我想访问这个{docBase}路径下。 222&#x2F;1.png的图片，现在需要怎么写？</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/user1/222/1.png">http://localhost:8080/user1/222/1.png</a></p>
<p>现在，想访问 test333里面的  1.txt。需要怎么写？</p>
<p><code>http://localhost:8080/test52</code>已经位于 D:&#x2F;test333</p>
<p><code>http://localhost:8080/test52/1.txt</code></p>
<p>想访问 test333里面 1234文件里面的，1.png 。</p>
<p><code>http://localhost:8080/test52/1234/1.png</code></p>
<h5 id="conf-server-xml-了解"><a href="#conf-server-xml-了解" class="headerlink" title="conf&#x2F;server.xml(了解)"></a>conf&#x2F;server.xml(了解)</h5><p>需要在Host节点下配置Context节点</p>
<p>&#x2F;app452—–Context</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;/app452&quot;</span> <span class="attr">docBase</span>=<span class="string">&quot;D:\app2&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在我们需要找 D:&#x2F;app2。这时候怎么写 </p>
<p><code>http://localhost:8080/&#123;path的值&#125;</code> 其实就相当于找到docBase。</p>
<p><code>http://localhost:8080/app452</code>就相当于找到  <code>D:\app2</code></p>
<p><code>http://localhost:8080/app452/2.txt</code>相当于找到了 <code>D:\app2、2.txt</code></p>
<p>这个作为了解即可，因为修改配置文件比较危险。</p>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p><font color=red><strong>静态资源服务器的本质：</strong></font>把用户输入的一个路径（url），加以解析转换成服务器所在的主机本地硬盘路径。</p>
<p>需要能够获取到该文件的硬盘路径。</p>
<p>比如，我们在url上输入 <code>http://localhost:8080/user/1.txt</code>最终，Tomcat需要在本地找到这样一个1.txt，然后把数据写回给浏览器。</p>
<p>大家一定要掌握这个映射关系。</p>
<p><font color=red><strong>除了上述我们部署目录之外，其实tomcat还支持部署压缩包，只不过压缩包的格式，而是war格式。</strong></font></p>
<p>war包部署到了tomcat中之后，tomcat会自行将其解压缩成目录，访问方式和上述完全一致。</p>
<p>如果大家不写前面的路径。其实是访问的 webapps目录下的 ROOT文件夹。 默认应用。</p>
<h3 id="Tomcat设置"><a href="#Tomcat设置" class="headerlink" title="Tomcat设置"></a>Tomcat设置</h3><p><font color=red><strong>1.设置默认端口号</strong></font></p>
<p>比如访问<a target="_blank" rel="noopener" href="http://www.cskaoyan.com时,发现没有携带端口号,如果没有端口号,那么说明的是当前服务器使用的是当前协议的默认端口号./">www.cskaoyan.com时，发现没有携带端口号，如果没有端口号，那么说明的是当前服务器使用的是当前协议的默认端口号。</a></p>
<p>http : 80</p>
<p>https: 443</p>
<p>对于http协议来说，默认端口号是80端口号。如果你也希望访问你的tomcat时，也不携带端口号，你只需要设置你的tomcat监听80端口号即可。</p>
<p><code>conf/server.xml</code>可以在这里修改Tomcat的端口。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;80&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><font color=red><strong>2.设置缺省应用</strong></font></p>
<p>tomcat中存在着一个缺省应用，如果没有找到匹配的应用时，则将该请求交给缺省应用来处理。</p>
<p>缺省应用的特征：</p>
<p>1.如果希望配置一个ROOT应用，那么webapps目录下新建一个ROOT目录；<code>conf/Catalina/localhost</code>目录下新建一个<code>ROOT.xml</code></p>
<p>2.但是ROOT应用下的资源文件在访问时，不需要携带应用的名称。</p>
<p>虚拟映射也可以配置一个ROOT.xml。如果虚拟映射和直接部署都有。虚拟映射的优先级高。</p>
<p>假设，如果你部署了一个资源文件，但是希望在访问时不携带应用名，则直接设置应用名为ROOT即可。</p>
<p><font color=red><strong>3.设置欢迎页面（缺省页面）</strong></font></p>
<p>比如访问<a href="http://localhost，可以显示出一个页面。访问的是哪个页面呢？">http://localhost，可以显示出一个页面。访问的是哪个页面呢？</a></p>
<p>1.没有应用名，说明访问的是ROOT应用</p>
<p>2.没有页面，说明访问的是欢迎页面(<code>conf/web.xml</code>文件中有配置)</p>
<p>表示的是：如果请求没有指明具体访问的是哪个页面，那么会在当前应用下依次去查找是否存在该文件，如果存在，则加载；如果不存在，则返回404</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>要求通过ip地址就可以访问到该文件。</p>
<p><font color=red><strong>需要注意：</strong></font></p>
<p>1.有部分同学可能80端口号没法改，因为已经被微软的产品占用了</p>
<p>2.如果自己可以访问，别人访问不到，关注防火墙</p>
<p>Tomcat控制台乱码，是因为我们的cmd是GBK的编码，Tomcat是UTF8的编码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">修改logging.properties配置 :</span><br><span class="line">打开tomcat/conf/logging.properties</span><br><span class="line">添加语句：java.util.logging.ConsoleHandler.encoding = GBK</span><br><span class="line">重启tomcat，查看日志数据即可</span><br></pre></td></tr></table></figure>



<p>中文文件乱码问题</p>
<p>访问文件。1.txt里面有 中文，也会乱码。</p>
<p>这个乱码我们目前不需要解决。</p>
<p>映射路径问题</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">配置的docBase一定要是一个路径，不能是一个文件。</span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">docBase</span>=<span class="string">&quot;D:\app1\1.png&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>






    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HTTP%E5%92%8CTomcat/" rel="tag"># HTTP和Tomcat</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/08/14/Java%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/6-%E5%89%8D%E7%AB%AF/" rel="prev" title="6_前端">
                  <i class="fa fa-angle-left"></i> 6_前端
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/08/14/Java%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/8-SQL/" rel="next" title="8_SQL">
                  8_SQL <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">染星辰</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
